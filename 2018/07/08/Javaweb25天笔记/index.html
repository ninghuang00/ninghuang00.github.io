<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="javaweb," />










<meta name="description" content="传智播客视频javaweb25天笔记">
<meta name="keywords" content="javaweb">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaweb25天笔记">
<meta property="og:url" content="http://yoursite.com/2018/07/08/Javaweb25天笔记/index.html">
<meta property="og:site_name" content="Just Try It">
<meta property="og:description" content="传智播客视频javaweb25天笔记">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-07-08T08:56:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Javaweb25天笔记">
<meta name="twitter:description" content="传智播客视频javaweb25天笔记">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/07/08/Javaweb25天笔记/"/>





  <title>Javaweb25天笔记 | Just Try It</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Just Try It</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/08/Javaweb25天笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ninghuang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just Try It">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Javaweb25天笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-08T16:55:11+08:00">
                2018-07-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/笔记/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p> 传智播客视频javaweb25天笔记<br> <a id="more"></a></p>
<h1 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h1><h2 id="tomcat服务器的安装和配置，http协议"><a href="#tomcat服务器的安装和配置，http协议" class="headerlink" title="tomcat服务器的安装和配置，http协议"></a>tomcat服务器的安装和配置，http协议</h2><ul>
<li>虚拟目录的映射，</li>
<li>虚拟目 录的配置（serve.xml,catalina\localhost\）</li>
<li>http协议的请求和响应的各个组成部分<ol>
<li>各个常见请求头的含义</li>
<li>各个响应头的含义<h2 id="servlet开发"><a href="#servlet开发" class="headerlink" title="servlet开发"></a>servlet开发</h2></li>
</ol>
</li>
<li>servlet的开发7个细节性的问题</li>
<li>ServletConfig</li>
<li><p>ServletContext对象</p>
<ul>
<li>域对象</li>
<li>读取资源文件（三种方式）<ul>
<li>ServletContext（资源不在类目录下的时候</li>
<li>ClassLoader（文件比较小的时候，因为资源h会被读到内存中</li>
<li>FileInputStream（</li>
</ul>
</li>
<li><p>转发 this.getServletContext.getRequestDispatcher()</p>
<h2 id="request和response的使用"><a href="#request和response的使用" class="headerlink" title="request和response的使用"></a>request和response的使用</h2><h4 id="一个http响应应该包含响应状态行-响应头-响应数据-要掌握通过response发送者三部分内容"><a href="#一个http响应应该包含响应状态行-响应头-响应数据-要掌握通过response发送者三部分内容" class="headerlink" title="一个http响应应该包含响应状态行 响应头 响应数据 要掌握通过response发送者三部分内容"></a>一个http响应应该包含响应状态行 响应头 响应数据 要掌握通过response发送者三部分内容</h4><p>2 response发送中文<br>3 response发送动态图片<br>4 response实现下载<br>5 response实现请求重定向<br>6 meta标签模拟http响应头</p>
<p>1 http请求包含请求头 请求头 请求数据 要掌握通过request获取者三部分内容<br>2 使用request获取中文数据的问题（get/post<br>3 使用request获取各种不同类型的表单数据（text\checkbox\radio<br>4 域对象<br>5 实现请求转发</p>
<h2 id="session和Cookie（回话过程中多个web组件之间数据共享问题"><a href="#session和Cookie（回话过程中多个web组件之间数据共享问题" class="headerlink" title="session和Cookie（回话过程中多个web组件之间数据共享问题"></a>session和Cookie（回话过程中多个web组件之间数据共享问题</h2><h4 id="cookie：吧数据打给客户机"><a href="#cookie：吧数据打给客户机" class="headerlink" title="cookie：吧数据打给客户机"></a>cookie：吧数据打给客户机</h4><p>  1 显示用户上次登录的时间<br>  2 用户的历史浏览商品记录</p>
<h4 id="session：把数据存在服务器的session对象中"><a href="#session：把数据存在服务器的session对象中" class="headerlink" title="session：把数据存在服务器的session对象中"></a>session：把数据存在服务器的session对象中</h4><p>  1 购物案例</p>
<pre><code>1 实现关掉浏览器后，session还能为用户服务，一个session为多个窗口服务
2 实现用户禁用Cookie后，还能实现购物
</code></pre><p>  2 用户登录<br>  3 防止表单重复提交</p>
<pre><code>1 md5/base64
</code></pre><h2 id="jsp"><a href="#jsp" class="headerlink" title="jsp"></a>jsp</h2><p>1 9大内置对象<br>2 jsp常见的标签<br>3 el表达式和jstl标签库</p>
<h2 id="javabean开发"><a href="#javabean开发" class="headerlink" title="javabean开发"></a>javabean开发</h2><p>1 jsp+javabean（简单计算器<br>2 jsp+servlet+javabean（mvc<br>3 用户登录和注册案例<br>4 购物车案例</p>
<h2 id="自定义标签"><a href="#自定义标签" class="headerlink" title="自定义标签"></a>自定义标签</h2><p>1 传统标签（了解<br>  tag：是否执行标签体，以及标签余下的jsp<br>  IterationTag：迭代标签体<br>  bodyTag：修改标签体<br>2 简单标签（掌握<br>3 SimpleTag（可以替换上面几个传统标签<br>4 标签属性<br>5 打包标签库<br>6 .EXE文件</p>
<h2 id="el-jstl-web国际化"><a href="#el-jstl-web国际化" class="headerlink" title="el + jstl web国际化"></a>el + jstl web国际化</h2><p>1 固定文本的国际化<br>  properties文件，一组资源文件就是一个资源包，ResourceBundle.getBundle（）<br>2 动态数据国际化<br>  DateFormat：日期国际化</p>
<pre><code>Format（Date date） 符合国家地区习惯的字符串
parse（String date） 把字符串格式化成日期
</code></pre><p>3 MessageFormat<br>  批量国际化</p>
</li>
</ul>
</li>
</ul>
<h2 id="jdbc开发"><a href="#jdbc开发" class="headerlink" title="jdbc开发"></a>jdbc开发</h2><pre><code>1 入门
2 jdbc中涉及到的每一个对象的方法解析
    DriverManager
    Connection
    Statement（PreparedStatement）
    ResultSet
3 用jdbc改造注册登录案例
    DaoFactory
    DaoException
    sqlz注入问题
4 PreparedStatement（PreparedStatement和Statement对象的区别
5 jdbc案例（客户关系
</code></pre><h2 id="jdbc开发2"><a href="#jdbc开发2" class="headerlink" title="jdbc开发2"></a>jdbc开发2</h2><pre><code>1 分页（Page）
2 批处理
3 大数据
4 存储过程的调用
5 获取自动增长的主键
</code></pre><h2 id="jdbc开发3"><a href="#jdbc开发3" class="headerlink" title="jdbc开发3"></a>jdbc开发3</h2><pre><code>1 事务
    1 什么是事务 start transactioncommit rollback；
    2 事务的四大特性：ACID
    3 四大特性的隔离级别，
        脏读 一个事务读取到另一个事务已经提交的数据
        不可重复读
        虚读 
    4 子安jdbc程序中怎么控制多条sql作为整体执行，在jdbc中如何设置事务隔离级别
    5 连接池的实现原理
    6 常用的连接池产品
        1 tomcat内置（DBCP，JNDI
        2 DBCP C3P0
    7 元数据
    8 自己设计类似于DBUtils的框架
</code></pre><h2 id="jdbc开发4"><a href="#jdbc开发4" class="headerlink" title="jdbc开发4"></a>jdbc开发4</h2><pre><code>1 DbUtils的使用（常见的集中处理器
2 实际开发中如何控制事务（ThreadKLocal***
3 jdbc多表操作（hibernate基础
    一对多（多对一） 一般建议在多的一方维护关系
    多对多 一对一
Oracle的大数据
</code></pre><h2 id="过滤器和监听器"><a href="#过滤器和监听器" class="headerlink" title="过滤器和监听器"></a>过滤器和监听器</h2><hr>
<h1 id="day07"><a href="#day07" class="headerlink" title="day07"></a>day07</h1><ul>
<li>会话管理 cookie技术（客户端的技术） session技术（服务器端的技术）</li>
<li>用cookie写一个历史浏览记录</li>
<li>session技术 用session实现购物记录</li>
<li>session的原理 设置session的有效期 浏览器禁用Cookie后servlet共享数据导致的问题 url重写</li>
<li>session的常见应用<br>  1 登录<br>  2 防止表单重复提交 前台javaScript 后台表单带随机数<br>  3 实现一次性校验码</li>
<li>实现带验证码的登录</li>
</ul>
<hr>
<p>day17 dbutils<br>    01 dbutils文档 大数据不建议使用这个处理，自己写传统的方法处理<br>    02 dbutils的已经定义的处理器，如何进行实物处理<br>    03 ThreadLocal：看成一个容器，想这个容器中存放的对象，在当前线程范围内都可以取得出来</p>
<hr>
<p>day08 jsp</p>
<h2 id="JSP技术介绍"><a href="#JSP技术介绍" class="headerlink" title="JSP技术介绍"></a>JSP技术介绍</h2><pre><code>原理
1 web服务器是如何调用并执行一个jsp页面的 JSP实际上就是servlet
2 jsp页面中的html排版标签是如何被发送到客户端的 out.write()
3 jsp页面中的java代码服务器是如何执行的 原封不动
4 web服务器在调用JSP时，会给JSP提供一些什么java对象
jsp语法
自定义标签 el表达式
</code></pre><h2 id="error-page"><a href="#error-page" class="headerlink" title="error-page"></a>error-page</h2><h2 id="jsp乱码问题-jsp以什么码表保存在硬盘上，就通知浏览器以什么码表打开-include指令（jsp指令不能冲突）"><a href="#jsp乱码问题-jsp以什么码表保存在硬盘上，就通知浏览器以什么码表打开-include指令（jsp指令不能冲突）" class="headerlink" title="jsp乱码问题 jsp以什么码表保存在硬盘上，就通知浏览器以什么码表打开 include指令（jsp指令不能冲突）"></a>jsp乱码问题 jsp以什么码表保存在硬盘上，就通知浏览器以什么码表打开 include指令（jsp指令不能冲突）</h2><pre><code>JSP九大隐式对象
1 Request
2 Response
3 Session
4 Application servletContext
5 Config servletConfig
6 Page this
7 Exception
8 Out JSPWriter
9 pageContext
主要讲Out隐式对象和pageContext隐式对象（最重要）可以获得其他八大隐式对象 
</code></pre><h2 id="jsp标签"><a href="#jsp标签" class="headerlink" title="jsp标签"></a>jsp标签</h2><h2 id="重点-web开发涉及到的4个域对象"><a href="#重点-web开发涉及到的4个域对象" class="headerlink" title="重点 web开发涉及到的4个域对象"></a>重点 web开发涉及到的4个域对象</h2><pre><code>1 pageContext 页面范围内都可取
2 Request 如果客户端向服务器发请求，产生数据，客户看完就没用了（新闻）
3 Session 如果客户端向服务器发请求，产生数据，客户看完还有用（购物，购物信息，结账，浏览记录）
4 servletContext 如果客户端向服务器发请求，产生数据，客户看完了还要给其他用户用（聊天室）
</code></pre><hr>
<p>day09 mvc设计模式开发注册登录</p>
<h2 id="javabean-和jsp-什么是javabean（遵循特定写法的java类）"><a href="#javabean-和jsp-什么是javabean（遵循特定写法的java类）" class="headerlink" title="javabean 和jsp 什么是javabean（遵循特定写法的java类）"></a>javabean 和jsp 什么是javabean（遵循特定写法的java类）</h2><pre><code>1 这个java类必须有一个无参构造函数
2 属性必须私有化
2 有getter和setter函数
JSP提供的三个javabean组件动作元素
1 JSP：useBean
2 jsp：setBean
3 JSP：setProperty
</code></pre><h2 id="mvc设计模式-el表达式-customerBean-address-jsp自定义标签"><a href="#mvc设计模式-el表达式-customerBean-address-jsp自定义标签" class="headerlink" title="mvc设计模式 el表达式( ${customerBean.address} ) jsp自定义标签"></a>mvc设计模式 el表达式( ${customerBean.address} ) jsp自定义标签</h2><pre><code>el表达式如何取数据
</code></pre><h2 id="jsp标签-1"><a href="#jsp标签-1" class="headerlink" title="jsp标签"></a>jsp标签</h2><hr>
<p>day10 mvc购物车</p>
<hr>
<p>day11</p>
<h2 id="自定义标签库-移除jsp中的java代码"><a href="#自定义标签库-移除jsp中的java代码" class="headerlink" title="自定义标签库 移除jsp中的java代码"></a>自定义标签库 移除jsp中的java代码</h2><pre><code>1 实现Tag接口的java类
2 编写标签库描述符（tld）文件，在tld文件中岁标签处理器类进行描述
</code></pre><h2 id="自定义标签如何控制jsp页面"><a href="#自定义标签如何控制jsp页面" class="headerlink" title="自定义标签如何控制jsp页面"></a>自定义标签如何控制jsp页面</h2><pre><code>1 实现tag接口，控制dostarttag方法的返回值，如果这个方法的返回值为
    `EVAL_BODY_INCLUDE`：执行标签体
    `SKIP_BODY`：不返回标签体
2 控制doendtag的返回值，
    `EVAL_PAGE`：执行余下的JSP页面
    `SKIP_PAGE`：不执行剩下的
3 实现IterationTag接口，控制doafterbody方法的返回值，
    `EVAL_BODY_AGAIN`：又执行一次标签体，直到返回SKIP_BODY，
4 实现BodyTag接口，控制doStartTag接口，控制doStartTag方法
    `EVAL_BODY_BUFFERED`，web服务器会创建BodyContent对象捕获标签体，然后在doendtag方法中得到代表bodyContent，就行修改
（以上内容听说已经淘汰，但是以前的框架在用，要能看得懂）
</code></pre><h2 id="简单标签库开发-SimpleTag接口"><a href="#简单标签库开发-SimpleTag接口" class="headerlink" title="简单标签库开发 SimpleTag接口"></a>简单标签库开发 SimpleTag接口</h2><pre><code>1 `//得到代表标签体的JSPFragment`
    `JspFragment jf = this.getJspBody();`
    `//其实默认就是输出给浏览`
    `jf.invoke(null);`
2 控制余下的jsp不执行，
    `throw new SkipPageException();`
</code></pre><h2 id="开发带属性的标签-防盗链"><a href="#开发带属性的标签-防盗链" class="headerlink" title="开发带属性的标签 防盗链"></a>开发带属性的标签 防盗链</h2><pre><code>1 如果标签接受的是复杂类型，如何给其赋值，用el表达式
</code></pre><h2 id="开发-foreach标签-if-else标签"><a href="#开发-foreach标签-if-else标签" class="headerlink" title="开发 foreach标签 if else标签"></a>开发 foreach标签 if else标签</h2><h2 id="html转义标签-打包标签库-配置文件放在META-INF"><a href="#html转义标签-打包标签库-配置文件放在META-INF" class="headerlink" title="html转义标签 打包标签库 配置文件放在META-INF"></a>html转义标签 打包标签库 配置文件放在META-INF</h2><pre><code>如何将java程序打包成可执行的jar包
1 先导出jar包，然后修改META-INFO文件夹中的MANIFEST.MF文件
    Main-Class: cn.hn.demo.JarDemo
</code></pre><hr>
<p>day12</p>
<h2 id="el表达式"><a href="#el表达式" class="headerlink" title="el表达式"></a>el表达式</h2><pre><code>1 支持的运算符
empty运算符` &lt;c:if test=&quot;${!empty(list)}&quot;&gt;`
二元表达式 `user == null ? &quot;对不起，没登录&quot; : &quot;welcome you &quot;`
[]和. 先用.再用[] 不行再用自定义
2 11个隐式对象
3 调用java的方法
    1 静态方法
    2 el函数用来移除jsp中与web开发无关的java代码 el自定义标签可以移除一切java代码
</code></pre><h2 id="el表达式不能相互嵌套-各种常用标签"><a href="#el表达式不能相互嵌套-各种常用标签" class="headerlink" title="el表达式不能相互嵌套 各种常用标签"></a>el表达式不能相互嵌套 各种常用标签</h2><h2 id="国际化开发"><a href="#国际化开发" class="headerlink" title="国际化开发"></a>国际化开发</h2><pre><code>1 固定文本国际化 写在properties文件中
2 动态数据国际化
    1 日期 DateFormat
    2 货币 NumberFormat
    3 动态文本 MessageFormat 批量处理 占位符
</code></pre><h2 id="国际化标签库"><a href="#国际化标签库" class="headerlink" title="国际化标签库"></a>国际化标签库</h2><h2 id="文件的上传和下载"><a href="#文件的上传和下载" class="headerlink" title="文件的上传和下载"></a>文件的上传和下载</h2><hr>
<p>day13 01 sql</p>
<h2 id="定义外键"><a href="#定义外键" class="headerlink" title="定义外键"></a>定义外键</h2><pre><code>create table husband{
    id int primary key,
    name varchar(20)
};
create table wife{
    id int primary key,
    name varchar(20),
    id int husband,
    constraint husband_FK foreign key(husband_id) references husband(id)
};
</code></pre><h2 id="表与表之间的关系："><a href="#表与表之间的关系：" class="headerlink" title="表与表之间的关系："></a>表与表之间的关系：</h2><pre><code>1 一对多，在多的表加外键约束，如部门和员工，在员工表加外键约束
2 多对多，采用中间表，中间表都是外键，如老师和学生，一个老师有多个学生，一个学生有多个老师
3 一对一，分为主从，一般在从表的主键约束列加外键约束，
</code></pre><hr>
<p>day14 JDBC</p>
<h2 id="JDBC简介"><a href="#JDBC简介" class="headerlink" title="JDBC简介"></a>JDBC简介</h2><h2 id="Connection对象常用方法"><a href="#Connection对象常用方法" class="headerlink" title="Connection对象常用方法"></a>Connection对象常用方法</h2><pre><code>1 createStatement（）
2 prepareStatement（sql）
3 prepareCall（sql）
4 setAutoCommit（Boolean autoCommit）
5 commit（）
6 rollback（）
</code></pre><h2 id="Statement对象常用方法"><a href="#Statement对象常用方法" class="headerlink" title="Statement对象常用方法"></a>Statement对象常用方法</h2><pre><code>1 executeQuery（String sql）：发送查询语句
2 executeUpdate（String sql）：发送insert，delete，update语句
3 execute（String sql）：发送所有，返回boolean
4 addBatch（String sql）：把多条sql语句放在一个批处理中
5 executeBatch（）：向数据库发送一批sql语句执行
</code></pre><h2 id="用jdbc改造用户登录项目"><a href="#用jdbc改造用户登录项目" class="headerlink" title="用jdbc改造用户登录项目"></a>用jdbc改造用户登录项目</h2><h2 id="PreparedStatement类"><a href="#PreparedStatement类" class="headerlink" title="PreparedStatement类"></a>PreparedStatement类</h2><pre><code>1 prepareStatement（）：程序对sql语句进行预编译，减轻数据库的压力    
2 防范SQL语句注入的问题
</code></pre><h2 id="customer案例"><a href="#customer案例" class="headerlink" title="customer案例"></a>customer案例</h2><hr>
<p>day15 </p>
<h2 id="分页功能"><a href="#分页功能" class="headerlink" title="分页功能"></a>分页功能</h2><pre><code>1 改写dao 从数据库获得数据计算分页信息
2 设计page对象 封装分页的页面数据
3    改写service，对web层提供分页数据服务
</code></pre><h2 id="一个页面里面显示的页码数"><a href="#一个页面里面显示的页码数" class="headerlink" title="一个页面里面显示的页码数"></a>一个页面里面显示的页码数</h2><h2 id="重构分页-将分页抽取出来作为一个jsp文件，然后要用的地方-lt-include-file-”-public-page-jsp”-gt"><a href="#重构分页-将分页抽取出来作为一个jsp文件，然后要用的地方-lt-include-file-”-public-page-jsp”-gt" class="headerlink" title="重构分页 将分页抽取出来作为一个jsp文件，然后要用的地方 &lt;%@include file=”/public/page.jsp” %&gt;"></a>重构分页 将分页抽取出来作为一个jsp文件，然后要用的地方 &lt;%@include file=”/public/page.jsp” %&gt;</h2><pre><code>用自定义标签显示省略号
</code></pre><h2 id="对数据修改和删除"><a href="#对数据修改和删除" class="headerlink" title="对数据修改和删除"></a>对数据修改和删除</h2><h2 id="使用jdbc处理大数据（大文本和二进制）"><a href="#使用jdbc处理大数据（大文本和二进制）" class="headerlink" title="使用jdbc处理大数据（大文本和二进制）"></a>使用jdbc处理大数据（大文本和二进制）</h2><pre><code>jdbc用批处理 两种处理方式Statement和prepareStatement
用java调用存储过程
</code></pre><hr>
<p>day16 事务</p>
<h2 id="事务的概念-将多条sql语句作为一个整体执行"><a href="#事务的概念-将多条sql语句作为一个整体执行" class="headerlink" title="事务的概念 将多条sql语句作为一个整体执行"></a>事务的概念 将多条sql语句作为一个整体执行</h2><pre><code>Start transaction 开始事务
rollback 回滚事务
commit 提交事务

事务的特性 ACID
atomicity 原子性
consistency 一致性
isolation 隔离性
durability 持久性
</code></pre><h2 id="事务的隔离性"><a href="#事务的隔离性" class="headerlink" title="事务的隔离性"></a>事务的隔离性</h2><pre><code>1 脏读 一个事务读取到另一个事务未提交的数据
2 不可重复读 第一次和第二次读的数据不一致
3 虚读 一个事务读到另一个事务插入的数据

解决方法 set transaction isolation level Serializable
        select @@_isolation
serializable（级别最高）
reapeatable read
read committed
read uncommitted
</code></pre><h2 id="连接池"><a href="#连接池" class="headerlink" title="连接池"></a>连接池</h2><pre><code>如何改写Connection.close（）方法
当发现一个对象的方法不够用的时候
1、写一个子类，覆盖方法
2、写一个包装类，增强方法
    1 写一个类实现与被增强对象相同的接口
    2 定义一个变量，指向被增强对象
    3 定义一个构造方法，接受被增强对象
    4 覆盖想增强的方法
    5 对于不想增强的方法，直接调用被增强对象的方法
3、用动态代理，返回一个代理对象，拦截原方法的调用(拦截机制)
    1 Proxy.newProxyInstance(JdbcPool.class.getClassLoader(), conn.getClass().getInterfaces(), new InvocationHandler() {
    @override
    ...
    });
使用开源库，dbcp
</code></pre><h2 id="开源库-c3p0的使用"><a href="#开源库-c3p0的使用" class="headerlink" title="开源库 c3p0的使用"></a>开源库 c3p0的使用</h2><pre><code>使用tomcat服务器创建的连接池 JNDI容器(java naming and directory interface)
</code></pre><h2 id="编写自己的jdbc框架"><a href="#编写自己的jdbc框架" class="headerlink" title="编写自己的jdbc框架"></a>编写自己的jdbc框架</h2><pre><code>1 利用元数据，改写dao的增删改方法，使用ResultSetMetaData对象获取数据信息
2 使用接口以及反射技术改写查方法，即处理结果集的方法做成接口对象参数，让用户传入，
</code></pre><hr>
<p>day17 dbutil</p>
<hr>
<p>day18 </p>
<h2 id="web-xml中的配置不正确可能会导致tomcat服务器启动失败"><a href="#web-xml中的配置不正确可能会导致tomcat服务器启动失败" class="headerlink" title="web.xml中的配置不正确可能会导致tomcat服务器启动失败"></a>web.xml中的配置不正确可能会导致tomcat服务器启动失败</h2><pre><code>01 servlet过滤器Filter
    filter可以对request和response进行一些预处理，比如进行字符集设置
    可以对filter设置初始化参数
</code></pre><h2 id="用-pageContext-request-contextPath-获得项目路径"><a href="#用-pageContext-request-contextPath-获得项目路径" class="headerlink" title="用 ${pageContext.request.contextPath }获得项目路径"></a>用 <code>${pageContext.request.contextPath }</code>获得项目路径</h2><pre><code>02 filter的常见应用
    1 阻止浏览器缓存jsp页面的filter
    2 自动登录功能
        完善自动登录功能，因为filter会拦截所有页面的请求，自动登录以后每次访问网页又执行登陆验证的代码
03 filter的部署和注册
    可以拦截4种向服务器请求资源的方式
        request forward error include
    过滤器高级开发，对拦截的request，response增强之后进行传递
        使用包装设计模式增强BufferedReader 
</code></pre><hr>
<p>Day19 权限过滤器</p>
<h2 id="搭建框架"><a href="#搭建框架" class="headerlink" title="搭建框架"></a>搭建框架</h2><h2 id="三个对象"><a href="#三个对象" class="headerlink" title="三个对象"></a>三个对象</h2><pre><code>1. 用户
2. 角色
3. 权限
</code></pre><h2 id="数据库五张表"><a href="#数据库五张表" class="headerlink" title="数据库五张表"></a>数据库五张表</h2><h3 id="User表"><a href="#User表" class="headerlink" title="User表"></a>User表</h3><pre><code>create table user(
id varchar(40) primary key,
username varchar(100) not null unique,
password varchar(100) not null,
description varchar(255)
);
</code></pre><h3 id="role表"><a href="#role表" class="headerlink" title="role表"></a>role表</h3><pre><code>create table role(
id varchar(40) primary key,
name varchar(100) not null unique,
description varchar(255)
);
</code></pre><h3 id="privilege表"><a href="#privilege表" class="headerlink" title="privilege表"></a>privilege表</h3><pre><code>create table privilege(
id varchar(40) primary key,
name varchar(100) not null unique,
description varchar(255)
);
</code></pre><h3 id="user-role表"><a href="#user-role表" class="headerlink" title="user_role表"></a>user_role表</h3><pre><code>create table user_role(
user_id varchar(40),
role_id varchar(40),
primary key(user_id,role_id),
constraint user_id_FK foreign key(user_id) references user(id),
constraint role_id_FK foreign key(role_id) references role(id)
);
</code></pre><h3 id="role-privilege表"><a href="#role-privilege表" class="headerlink" title="role_privilege表"></a>role_privilege表</h3><pre><code>create table role_privilege(
role_id varchar(40),
privilege_id varchar(40),
primary key(role_id,privilege_id),
constraint role_id_FK1 foreign key(role_id) references role(id),
constraint privilege_id_FK foreign key(privilege_id) references privilege(id)
);
</code></pre><h2 id="sp页面分割-head-left-body"><a href="#sp页面分割-head-left-body" class="headerlink" title="sp页面分割 head left body"></a>sp页面分割 head left body</h2><pre><code>权限管理 jsp页面设计 servlet设计 
</code></pre><hr>
<p>day20 文件的上传和下载</p>
<pre><code>01 表单文件上传
    1 解决上传文件名和上传文件数据的乱码问题
    2 表单为文件上传，request设置编码无效,只能手工转化
    value = new String(value.getBytes(&quot;iso8859-1&quot;),&quot;UTF-8&quot;);
     3 为了保证服务器安全，上传文件应该放在外界无法访问的目录
    4 为了保证上传文件的唯一性，为用户上传的文件名生成UUID
    5 保存上传文件的目录要打散，使用hash算法分配路径makePath（），防止一个目录下存放太多的文件
02 限制文件上传最大值
    1 调用item.delete()确保删除临时文件
    2 限制上传文件类型
    3 设置上传文件进度监听器 要在upload.parseRequest(request);之前
    4 在web页面中动态添加上传输入项
03 Servlet监听器
    1 frame窗口demo，
    2 如何为自己写的对象设计监听器,观察者设计模式（Observer）
    3 Servlet监听器
        1 ServletContext监听器，实现ServletContextListener接口，然后在web.xml中配置注册，`&lt;listener&gt;`标签
04 各种监听器
    1 HttpSessionListener，session的创建和销毁（网站在线人数）
    2 HttpRequest监听器（网站请求数量）
05 各种监听器
    1 自定义session扫面器 （增删改查用linkedList
    2 用监听器定时发送邮件
    3 监听三个域对象的属性变化
        1 ServletCOntextAttributeListener(据说没什么大用)
        2 HttpSessionAttributeListener
        3 ServletRequestAttributeListener
    4 感知Session绑定的事件监听器 
06 显示登录用户列表，并实现踢人功能
</code></pre><p>day21 书店管理系统</p>
<hr>
<p>day22 java加强 泛型</p>
<h2 id="泛型方法和泛型类，要先定义后使用-类上声明的泛型只能用于类中的非静态方法，静态方法需要单独声明"><a href="#泛型方法和泛型类，要先定义后使用-类上声明的泛型只能用于类中的非静态方法，静态方法需要单独声明" class="headerlink" title="泛型方法和泛型类，要先定义后使用,类上声明的泛型只能用于类中的非静态方法，静态方法需要单独声明"></a>泛型方法和泛型类，要先定义后使用,类上声明的泛型只能用于类中的非静态方法，静态方法需要单独声明</h2><pre><code>public class Dema{
    public &lt;T&gt; void aa(T t){ //泛型方法

    }

    public &lt;T&gt; void bb(T t){

    }
}
等同于
public class Demo&lt;T&gt;{
    public void aa(T t){

    }

    public void bb(T t){

    }

    public static &lt;T&gt; void cc(T t){

    }
}
</code></pre><h2 id="泛型的使用场景，dao层的接口，结合HIbernate写非常简单，反射泛型"><a href="#泛型的使用场景，dao层的接口，结合HIbernate写非常简单，反射泛型" class="headerlink" title="泛型的使用场景，dao层的接口，结合HIbernate写非常简单，反射泛型"></a>泛型的使用场景，dao层的接口，结合HIbernate写非常简单，反射泛型</h2><pre><code>以下示例代码可以直接继承，继承之后就拥有泛型类型的增删改查方法

import org.hibernate.Session;
public abstract class BaseDao&lt;T&gt;{
    private Session session;
    private Class clazz;
    //哪个子类调用这个方法就得到的class就是子类的处理类型（非常重要） 
    public BaseDao(){
    Class clazz = this.getClass(); //得到子类
    ParameterizedType  pt = (ParameterizedType)clazz.getGenericSuperclass(); //得到父类
    clazz = （Class)pt.getActualTypeArguments()[0];
    }

    public void add(T t){
        session.save(t);
    }

    public T find(String id){
        return (T)session.get(clazz,id)
    }

    public void update(T t){
        session.update(t);
    }

    public void delete(String id){
    T t = (T)session.get(clazz,id);
    session.delete(t);
    }
}
</code></pre><h2 id="注解配置"><a href="#注解配置" class="headerlink" title="注解配置"></a>注解配置</h2><pre><code>    1 annotation
        1 自定义注解
            注解可以接受的数据类型有：
                1 基本数据类型，String，Class，annotation，枚举类型，以及上述类型的一维数组
                2 元annotation，修饰注解的注解
                    @Retention
                    用于指定该Annotation可以保留的域，可以通过RetentionPolicy.xxx来指定
                    @Target
                    用于指定注解可以用于修饰的那些成员
                    @Documented
                    可以被提取文档
                    @Inherited
                    被他修饰的注解具有可继承性，就是说被修饰的注解修饰的方法被子类继承后，子类的给方法上也自动拥有该注解
                3 通过注解注入对象
                    1 得到需要注入的属性
                    2 得到要注入的属性需要的类型
                    3 创建属性需要的对象
                    4 得到属性的写方法
                    5 反射出方法上声明的注解
                    6 得到注解上声明的信息，填充要注入的对象
                    7 将对象注入目标

        2 解析注解
            1 使用反射技术拿到方法，然后拿到方法上的注解
04 动态代理（非常重要）
    1 newProxyInstance(ClassLoader，Class，InvacationHandler) 
    2 使用动态代理做filte可以不用重写代理对象中的所有方法，只要拦截自己感兴趣的方法就行了
    3 用动态代理修改bookstores的权限系统
        1 建立实体建立表来保存权限数据
        2 在serviceFactory中运用动态代理技术进行权限拦截，细粒度拦截到方法上
    4 类加载器
        1 负责将.class加载到内存中，并为之生成相应的java.lang.Class对象
        2 父类委托机制
            tomcat没有采用该机制，所以有可能产生classCastException异常
        3 cache机制
</code></pre><hr>
<p>day23 邮件原理与javaMail开发<br>    终端直接连接互联网上的主机命令：telnet smtp.souhu.com portnumber<br>    QQ邮箱 POP3 和 SMTP 服务器地址设置如下：邮箱POP3服务器（端口995）SMTP服务器（端口465或587）qq.compop.qq.comsmtp.qq.comSMTP服务器需要身份验证。<br>    gmail pop.gmail.com 995</p>
<h2 id="SMTP服务器，处理发送邮件"><a href="#SMTP服务器，处理发送邮件" class="headerlink" title="SMTP服务器，处理发送邮件"></a>SMTP服务器，处理发送邮件</h2><pre><code>    telnet smtp.sina.com 25
    smtp协议
    ehlo xxx
    auth login
bmluZ2h1YW5nMDA=     （经过base64编码的用户名，不需要@后面的内容）
aG4xMjM0NTY=        （经过base64编码的密码）
mail from:&lt;ninghuang00@sina.com&gt;
rcpt to:&lt;ninghuang00@gmail.com&gt;

data
from:&lt;ninghuang00@sina.com&gt;
to:&lt;ninghuang00@gmail.com&gt;
subject:test

    xxxxxxxxxx
    .
    quit
</code></pre><h2 id="POP3服务器，处理接收邮件"><a href="#POP3服务器，处理接收邮件" class="headerlink" title="POP3服务器，处理接收邮件"></a>POP3服务器，处理接收邮件</h2><pre><code>telnet pop3.sina.com 110
user ninghaung00
pass hn123456
stat 
list
</code></pre><h2 id="Struts开发"><a href="#Struts开发" class="headerlink" title="Struts开发"></a>Struts开发</h2><p>快乐是建立在痛苦的基础上的，你要知道这个框架为什么好，就要知道没有这个框架之前有什么不好。<br>     1 之前没有struts的时候写servlet遇到的问题<br>         1 需要封装bean<br>         2 需要转发地址<br>         3 代码中的异常要自己手动捕捉<br>     2 struts入门</p>
<hr>
<p>day 24 struts</p>
<h2 id="Struts配置文件的常用属性"><a href="#Struts配置文件的常用属性" class="headerlink" title="Struts配置文件的常用属性"></a>Struts配置文件的常用属性</h2><pre><code>&lt;action
    path=&quot;/register&quot;    //指定action处理的地址
    type=&quot;cn.hn.web.RegisterAction&quot;    //指定处理请求的Action的完整类名
    name=&quot;User&quot;    //指定封装数据的bean的名字
    scope=&quot;request&quot;    //指定封装之后的bean存在什么域中，不指定默认是session
    attribute=&quot;myformbean&quot;    //封装好的bean的key，不指定默认是name属性的值
    input=&quot;/request.jsp&quot;    //指定接受数据的页面，校验失败后跳转回去
    forword=&quot;message,jsp&quot;    //指定 收到请求时跳转的jsp页面，配置后action不再被调用
    include=&quot;welcome&quot;    //指定搜到请求时进行页面包含
    unknow=&quot;true&quot;    //默认值false，处理用户机的无效请求
    parameter=&quot;method&quot;    //配置action参数，在action中通过调用actionMapping.getParameter方法可以获取在这里配置的参数参数
    classname=&quot;&quot;    //&lt;action&gt;标签和所有的配资信息通过哪个对象进行封装，默认是actionMapping对象
    validate=&quot;true&quot;&gt;    //默认是true，是否在封装信息时进行校验
    &lt;forword name=&quot;hello&quot; path=&quot;/success.jsp&quot;/&gt;
&lt;/action&gt;
</code></pre><p>以后转发请求在struts中主要在struts-config.xml中配置就行，这样就可以直接将jsp保护起来<br>        <code>&lt;acition path=&quot;/RegisterUI&quot; forword=&quot;/WEB-INF/jsp/register.jsp&quot;&gt;&lt;/action&gt;</code></p>
<h2 id="使用struts的-lt-html-link-gt-标签构建url额好处"><a href="#使用struts的-lt-html-link-gt-标签构建url额好处" class="headerlink" title="使用struts的 &lt;html:link&gt;标签构建url额好处"></a>使用struts的 <code>&lt;html:link&gt;</code>标签构建url额好处</h2><pre><code>1 使用 `&lt;html:link&gt; `标签不用关心web应用程序的名称
2 自动附加Jsessionid进行url重写
3 可以对参数信息进行url编码
</code></pre><h2 id="使用struts完成表单校验"><a href="#使用struts完成表单校验" class="headerlink" title="使用struts完成表单校验"></a>使用struts完成表单校验</h2><pre><code>1 在继承了ActionForm类的bean中重写函数validate方法完成校验，如果有错误跳转也由struts完成
2 在properties中配置文件信息实现国际化，在file encoding中设置勾选可以自动将中文转换成ASCII编码
</code></pre><h2 id="struts中解决乱码问题"><a href="#struts中解决乱码问题" class="headerlink" title="struts中解决乱码问题"></a>struts中解决乱码问题</h2><pre><code>1 可以自己写一个processor，不过中级解决方案还是用过滤器filter
</code></pre><h2 id="struts中防止表单重复提交"><a href="#struts中防止表单重复提交" class="headerlink" title="struts中防止表单重复提交"></a>struts中防止表单重复提交</h2><pre><code>1 点击注册按钮不直接Forword到注册页面，而是先通过一个action产生随机数，然后再转发到注册jsp页面
</code></pre><h2 id="使用beanUtils转换表单数据"><a href="#使用beanUtils转换表单数据" class="headerlink" title="使用beanUtils转换表单数据"></a>使用beanUtils转换表单数据</h2><pre><code>UserFromBean formbean = （UserFormBean）form;
User ueer = new User();
BeanUtils.copyProperties(user,formbean);
</code></pre><h2 id="在表单校验的时候进行封装，就是在UserFormBean中维护一个User，后面直接取出来就好了，这样可以避免转换两次。"><a href="#在表单校验的时候进行封装，就是在UserFormBean中维护一个User，后面直接取出来就好了，这样可以避免转换两次。" class="headerlink" title="在表单校验的时候进行封装，就是在UserFormBean中维护一个User，后面直接取出来就好了，这样可以避免转换两次。"></a>在表单校验的时候进行封装，就是在UserFormBean中维护一个User，后面直接取出来就好了，这样可以避免转换两次。</h2><h2 id="不想进行表单校验的时候可以直接在UserFormBean中进行封装"><a href="#不想进行表单校验的时候可以直接在UserFormBean中进行封装" class="headerlink" title="不想进行表单校验的时候可以直接在UserFormBean中进行封装"></a>不想进行表单校验的时候可以直接在UserFormBean中进行封装</h2><hr>
<p>day25<br>    1 表单数据的业务逻辑校验<br>        1 用户名<br>    2 struts中的文件上传<br>        1 jsp页面中表单使用post方式提交<br>        2 enctype=”multipart/form-data”属性<br>        3 ActionForm中使用org.apache.struts.upload.FormFile类型定义文件字段<br>        4 fileupload.jar和io.jar<br>        5 Action中的execute方法中使用InputStream is = file.getInputStream();方法得到文件的输入流<br>        6 使用io的方法对文件进行上传</p>
<h2 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h2><p>在formbean中搞一个ArrayList<br>Action中的execute方法:</p>
<pre><code>UpFileFormBean formbean = (UpFileFormBean) form;
/*String username = formbean.getUsername();
FormFile file = formbean.getUpfile();

String filename = file.getFileName();
InputStream is = file.getInputStream();
FileOutputStream out = new FileOutputStream(&quot;/Users/huangning/Desktop/&quot; + filename);
int len = 0;
byte[] buffer = new byte[1024];
while((len = is.read(buffer))&gt;0){
    out.write(buffer,0,len);
}
out.close();
is.close();*/

List&lt;FormFile&gt; list = ((UpFileFormBean) form).getAll();
for (FormFile file : list) {
    String filename = file.getFileName();
    InputStream is = file.getInputStream();
    FileOutputStream out = new FileOutputStream(&quot;/Users/huangning/Desktop/&quot; + filename);
    int len = 0;
    byte[] buffer = new byte[1024];
    while ((len = is.read(buffer)) &gt; 0) {
        out.write(buffer, 0, len);
    }
    out.close();
    is.close();
}
</code></pre><p>formbean的写法:</p>
<pre><code>public class UpFileFormBean extends ActionForm {
private String username;
//private FormFile upfile;
List&lt;FormFile&gt; list = new ArrayList&lt;&gt;();

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public FormFile getList(int index) {
    return list.get(index);
}

public void setList(FormFile formFile,int index) {
    this.list.add(formFile);
}

public List&lt;FormFile&gt; getAll(){
    return this.list;
}
}
</code></pre><p>jsp中的:</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath}/UpFile.do&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;

    用户名:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;
    上传文件1:&lt;input type=&quot;file&quot; name=&quot;list[0]&quot;&gt;&lt;br&gt;
    上传文件2:&lt;input type=&quot;file&quot; name=&quot;list[1]&quot;&gt;&lt;br&gt;
    &lt;input type=&quot;submit&quot; value=&quot;upload&quot;&gt;

 &lt;/form&gt;
</code></pre><h2 id="使用struts下载文件"><a href="#使用struts下载文件" class="headerlink" title="使用struts下载文件"></a>使用struts下载文件</h2><pre><code>1 继承DownloadAction类,实现getStreamInfo方法
2 得到下载文件路径,然后返回FileStreamInfo对象就行了
</code></pre><h2 id="DispatchAction-使用一个Action处理多个请求"><a href="#DispatchAction-使用一个Action处理多个请求" class="headerlink" title="DispatchAction,使用一个Action处理多个请求"></a>DispatchAction,使用一个Action处理多个请求</h2><h2 id="动态的Formbean"><a href="#动态的Formbean" class="headerlink" title="动态的Formbean"></a>动态的Formbean</h2><pre><code>在配置文件中配合就行
</code></pre><h2 id="truts-Validate框架-一个struts插件-使用声明式的方式对表单进行校验-因此不需要写java代码"><a href="#truts-Validate框架-一个struts插件-使用声明式的方式对表单进行校验-因此不需要写java代码" class="headerlink" title="truts-Validate框架,一个struts插件,使用声明式的方式对表单进行校验,因此不需要写java代码"></a>truts-Validate框架,一个struts插件,使用声明式的方式对表单进行校验,因此不需要写java代码</h2><pre><code>1 维护方便
2 校验实现标准化
3 自动客户端校验
</code></pre><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法:"></a>使用方法:</h2><pre><code>1 把数据封装到org.Apache.struts.validator.DynaValidatorForm
2 DynaValidatorForm的validate方法被调用时,他会去调用validate框架,需要在struts中配置插件,配置步骤查看struts-core-xxx.jar下的validation-rules.xml中的&lt;plugin...
3 为了只指挥表单校验,需要在WEB-INF目录下创建validation.xml文件
4 为了在校验失败后提示错误消息,在src目录下创建资源文件,参照struts-core-xxx.jar下的validation-rules.xml
</code></pre><h2 id="struts中的权限管理"><a href="#struts中的权限管理" class="headerlink" title="struts中的权限管理"></a>struts中的权限管理</h2><ol>
<li>在要求权限访问的方法上使用@Permission注解,</li>
<li><p>然后继承Struts的RequestProcessor类,</p>
<ul>
<li>重写processActionPerform方法</li>
<li><p>写一个方法得到struts调用的方法</p>
<pre><code>Method getInvokeMethod(HTTPServletRequest request,HTTPServletResponse response, Action action,ActionForm form,ActionMapping mapping){
    //判断Struts调用的是是不是继承了DispatchAction还
    String methodName = null;
    if(!DispatchAction.class.isAssignableFrom(action.getClass())){
        methodName = &quot;execute&quot;;
    }else{
        methodName = request.getParameter(mapping.getParameter());
    }
    Class[] args = {ActionMapping.class,ActionForm.class,HTTPServletRequest.class,HTTPServletResponse.class};
    try{
    Method method = action.getClass().getMethod(methodName, args);
    return method;
    }catch(Exception e){
        throw new RuntimeException(e);
    }
}
</code></pre></li>
<li><p>判断调用的方法上有没有注解</p>
<pre><code>Permission p = method.getAnnotation(Permission.class);
if(p == null){
return super.....;
}else{
//检查用户是否登录,是否有权限...

}
</code></pre></li>
</ul>
</li>
</ol>
<ol start="3">
<li>在配置文件总进行配置controller</li>
</ol>
<h2 id="log4j的使用"><a href="#log4j的使用" class="headerlink" title="log4j的使用"></a>log4j的使用</h2><ol>
<li>导入jar包<br> 然后将log4j.properties放在src下.可以配置log的输出级别,相互出样式,路径,输出的追加方法</li>
<li>得到Logger对象<br> <code>Logger log = Logger.getLogger(Demo.class);</code></li>
</ol>
<h2 id="struts数据库管理模块"><a href="#struts数据库管理模块" class="headerlink" title="struts数据库管理模块"></a>struts数据库管理模块</h2><ol>
<li><p>设计一个数据库类Database</p>
<pre><code>public class Database{
    private String id;
    private String name;
    private String path;
    private Date backuptime;
    ...
}
</code></pre></li>
<li><p>然后编写DatabaseDaoImpl</p>
</li>
<li>创建数据库</li>
<li>编写Service层中的方法backupDatabase()方法</li>
<li><p>调用java中使用Windows cmd的方法备份数据库</p>
<pre><code>String filename = path + &quot;\\&quot; + &quot;bookstore&quot; + number + &quot;.sql&quot;;//得到数据库保存文件路径
String cmd = &quot;cmd /c mysqldump -uroot -phn123456 bookstore&gt;&quot; + filename;
//导入命令是 &quot;cmd /c mysql -uroot -phn123456 bookstore&lt;&quot; + path + &quot;\\&quot; + filename;
Runtime.getRuntime().exec(cmd);
</code></pre></li>
<li><p>事务管理</p>
<ul>
<li><p>在JdbcUtils中添加事务管理的方法</p>
<pre><code>public void deleteDatabase(String id){
    //删除数据库还要删除文件
    try{
        JdbcUtils.startTransaction();
        Database db = dao.find(id);
        ddao.delete(id);

        String filename = ...
        File file = new File(filename);
        if(file.exists()){
            file.delete();
        }
        JdbcUtils.commit();
    }catch(Exception e){
        JdbcUtils.rollback();
    }finally{    //很重要,解除线程上绑定的连接
        JdbcUtils.close();
    }
}
</code></pre></li>
</ul>
</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/javaweb/" rel="tag"># javaweb</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/08/spring32天笔记/" rel="next" title="spring32天笔记">
                <i class="fa fa-chevron-left"></i> spring32天笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/08/配置文件集/" rel="prev" title="配置文件集">
                配置文件集 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ninghuang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">107</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#总结："><span class="nav-number">1.</span> <span class="nav-text">总结：</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#tomcat服务器的安装和配置，http协议"><span class="nav-number">1.1.</span> <span class="nav-text">tomcat服务器的安装和配置，http协议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#servlet开发"><span class="nav-number">1.2.</span> <span class="nav-text">servlet开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#request和response的使用"><span class="nav-number">1.3.</span> <span class="nav-text">request和response的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一个http响应应该包含响应状态行-响应头-响应数据-要掌握通过response发送者三部分内容"><span class="nav-number">1.3.0.1.</span> <span class="nav-text">一个http响应应该包含响应状态行 响应头 响应数据 要掌握通过response发送者三部分内容</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#session和Cookie（回话过程中多个web组件之间数据共享问题"><span class="nav-number">1.4.</span> <span class="nav-text">session和Cookie（回话过程中多个web组件之间数据共享问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cookie：吧数据打给客户机"><span class="nav-number">1.4.0.1.</span> <span class="nav-text">cookie：吧数据打给客户机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#session：把数据存在服务器的session对象中"><span class="nav-number">1.4.0.2.</span> <span class="nav-text">session：把数据存在服务器的session对象中</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jsp"><span class="nav-number">1.5.</span> <span class="nav-text">jsp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#javabean开发"><span class="nav-number">1.6.</span> <span class="nav-text">javabean开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义标签"><span class="nav-number">1.7.</span> <span class="nav-text">自定义标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#el-jstl-web国际化"><span class="nav-number">1.8.</span> <span class="nav-text">el + jstl web国际化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jdbc开发"><span class="nav-number">1.9.</span> <span class="nav-text">jdbc开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jdbc开发2"><span class="nav-number">1.10.</span> <span class="nav-text">jdbc开发2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jdbc开发3"><span class="nav-number">1.11.</span> <span class="nav-text">jdbc开发3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jdbc开发4"><span class="nav-number">1.12.</span> <span class="nav-text">jdbc开发4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过滤器和监听器"><span class="nav-number">1.13.</span> <span class="nav-text">过滤器和监听器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#day07"><span class="nav-number">2.</span> <span class="nav-text">day07</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP技术介绍"><span class="nav-number">2.1.</span> <span class="nav-text">JSP技术介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#error-page"><span class="nav-number">2.2.</span> <span class="nav-text">error-page</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jsp乱码问题-jsp以什么码表保存在硬盘上，就通知浏览器以什么码表打开-include指令（jsp指令不能冲突）"><span class="nav-number">2.3.</span> <span class="nav-text">jsp乱码问题 jsp以什么码表保存在硬盘上，就通知浏览器以什么码表打开 include指令（jsp指令不能冲突）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jsp标签"><span class="nav-number">2.4.</span> <span class="nav-text">jsp标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重点-web开发涉及到的4个域对象"><span class="nav-number">2.5.</span> <span class="nav-text">重点 web开发涉及到的4个域对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#javabean-和jsp-什么是javabean（遵循特定写法的java类）"><span class="nav-number">2.6.</span> <span class="nav-text">javabean 和jsp 什么是javabean（遵循特定写法的java类）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mvc设计模式-el表达式-customerBean-address-jsp自定义标签"><span class="nav-number">2.7.</span> <span class="nav-text">mvc设计模式 el表达式( ${customerBean.address} ) jsp自定义标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jsp标签-1"><span class="nav-number">2.8.</span> <span class="nav-text">jsp标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义标签库-移除jsp中的java代码"><span class="nav-number">2.9.</span> <span class="nav-text">自定义标签库 移除jsp中的java代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义标签如何控制jsp页面"><span class="nav-number">2.10.</span> <span class="nav-text">自定义标签如何控制jsp页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#简单标签库开发-SimpleTag接口"><span class="nav-number">2.11.</span> <span class="nav-text">简单标签库开发 SimpleTag接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开发带属性的标签-防盗链"><span class="nav-number">2.12.</span> <span class="nav-text">开发带属性的标签 防盗链</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开发-foreach标签-if-else标签"><span class="nav-number">2.13.</span> <span class="nav-text">开发 foreach标签 if else标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#html转义标签-打包标签库-配置文件放在META-INF"><span class="nav-number">2.14.</span> <span class="nav-text">html转义标签 打包标签库 配置文件放在META-INF</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#el表达式"><span class="nav-number">2.15.</span> <span class="nav-text">el表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#el表达式不能相互嵌套-各种常用标签"><span class="nav-number">2.16.</span> <span class="nav-text">el表达式不能相互嵌套 各种常用标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#国际化开发"><span class="nav-number">2.17.</span> <span class="nav-text">国际化开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#国际化标签库"><span class="nav-number">2.18.</span> <span class="nav-text">国际化标签库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件的上传和下载"><span class="nav-number">2.19.</span> <span class="nav-text">文件的上传和下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#定义外键"><span class="nav-number">2.20.</span> <span class="nav-text">定义外键</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表与表之间的关系："><span class="nav-number">2.21.</span> <span class="nav-text">表与表之间的关系：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC简介"><span class="nav-number">2.22.</span> <span class="nav-text">JDBC简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Connection对象常用方法"><span class="nav-number">2.23.</span> <span class="nav-text">Connection对象常用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Statement对象常用方法"><span class="nav-number">2.24.</span> <span class="nav-text">Statement对象常用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用jdbc改造用户登录项目"><span class="nav-number">2.25.</span> <span class="nav-text">用jdbc改造用户登录项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PreparedStatement类"><span class="nav-number">2.26.</span> <span class="nav-text">PreparedStatement类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#customer案例"><span class="nav-number">2.27.</span> <span class="nav-text">customer案例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分页功能"><span class="nav-number">2.28.</span> <span class="nav-text">分页功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一个页面里面显示的页码数"><span class="nav-number">2.29.</span> <span class="nav-text">一个页面里面显示的页码数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重构分页-将分页抽取出来作为一个jsp文件，然后要用的地方-lt-include-file-”-public-page-jsp”-gt"><span class="nav-number">2.30.</span> <span class="nav-text">重构分页 将分页抽取出来作为一个jsp文件，然后要用的地方 &lt;%@include file=”/public/page.jsp” %&gt;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对数据修改和删除"><span class="nav-number">2.31.</span> <span class="nav-text">对数据修改和删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用jdbc处理大数据（大文本和二进制）"><span class="nav-number">2.32.</span> <span class="nav-text">使用jdbc处理大数据（大文本和二进制）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事务的概念-将多条sql语句作为一个整体执行"><span class="nav-number">2.33.</span> <span class="nav-text">事务的概念 将多条sql语句作为一个整体执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事务的隔离性"><span class="nav-number">2.34.</span> <span class="nav-text">事务的隔离性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接池"><span class="nav-number">2.35.</span> <span class="nav-text">连接池</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开源库-c3p0的使用"><span class="nav-number">2.36.</span> <span class="nav-text">开源库 c3p0的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编写自己的jdbc框架"><span class="nav-number">2.37.</span> <span class="nav-text">编写自己的jdbc框架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#web-xml中的配置不正确可能会导致tomcat服务器启动失败"><span class="nav-number">2.38.</span> <span class="nav-text">web.xml中的配置不正确可能会导致tomcat服务器启动失败</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-pageContext-request-contextPath-获得项目路径"><span class="nav-number">2.39.</span> <span class="nav-text">用 ${pageContext.request.contextPath }获得项目路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#搭建框架"><span class="nav-number">2.40.</span> <span class="nav-text">搭建框架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三个对象"><span class="nav-number">2.41.</span> <span class="nav-text">三个对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库五张表"><span class="nav-number">2.42.</span> <span class="nav-text">数据库五张表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#User表"><span class="nav-number">2.42.1.</span> <span class="nav-text">User表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#role表"><span class="nav-number">2.42.2.</span> <span class="nav-text">role表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#privilege表"><span class="nav-number">2.42.3.</span> <span class="nav-text">privilege表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#user-role表"><span class="nav-number">2.42.4.</span> <span class="nav-text">user_role表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#role-privilege表"><span class="nav-number">2.42.5.</span> <span class="nav-text">role_privilege表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sp页面分割-head-left-body"><span class="nav-number">2.43.</span> <span class="nav-text">sp页面分割 head left body</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#泛型方法和泛型类，要先定义后使用-类上声明的泛型只能用于类中的非静态方法，静态方法需要单独声明"><span class="nav-number">2.44.</span> <span class="nav-text">泛型方法和泛型类，要先定义后使用,类上声明的泛型只能用于类中的非静态方法，静态方法需要单独声明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#泛型的使用场景，dao层的接口，结合HIbernate写非常简单，反射泛型"><span class="nav-number">2.45.</span> <span class="nav-text">泛型的使用场景，dao层的接口，结合HIbernate写非常简单，反射泛型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注解配置"><span class="nav-number">2.46.</span> <span class="nav-text">注解配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SMTP服务器，处理发送邮件"><span class="nav-number">2.47.</span> <span class="nav-text">SMTP服务器，处理发送邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#POP3服务器，处理接收邮件"><span class="nav-number">2.48.</span> <span class="nav-text">POP3服务器，处理接收邮件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Struts开发"><span class="nav-number">2.49.</span> <span class="nav-text">Struts开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Struts配置文件的常用属性"><span class="nav-number">2.50.</span> <span class="nav-text">Struts配置文件的常用属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用struts的-lt-html-link-gt-标签构建url额好处"><span class="nav-number">2.51.</span> <span class="nav-text">使用struts的 &lt;html:link&gt;标签构建url额好处</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用struts完成表单校验"><span class="nav-number">2.52.</span> <span class="nav-text">使用struts完成表单校验</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#struts中解决乱码问题"><span class="nav-number">2.53.</span> <span class="nav-text">struts中解决乱码问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#struts中防止表单重复提交"><span class="nav-number">2.54.</span> <span class="nav-text">struts中防止表单重复提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用beanUtils转换表单数据"><span class="nav-number">2.55.</span> <span class="nav-text">使用beanUtils转换表单数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#在表单校验的时候进行封装，就是在UserFormBean中维护一个User，后面直接取出来就好了，这样可以避免转换两次。"><span class="nav-number">2.56.</span> <span class="nav-text">在表单校验的时候进行封装，就是在UserFormBean中维护一个User，后面直接取出来就好了，这样可以避免转换两次。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#不想进行表单校验的时候可以直接在UserFormBean中进行封装"><span class="nav-number">2.57.</span> <span class="nav-text">不想进行表单校验的时候可以直接在UserFormBean中进行封装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多文件上传"><span class="nav-number">2.58.</span> <span class="nav-text">多文件上传</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用struts下载文件"><span class="nav-number">2.59.</span> <span class="nav-text">使用struts下载文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DispatchAction-使用一个Action处理多个请求"><span class="nav-number">2.60.</span> <span class="nav-text">DispatchAction,使用一个Action处理多个请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#动态的Formbean"><span class="nav-number">2.61.</span> <span class="nav-text">动态的Formbean</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#truts-Validate框架-一个struts插件-使用声明式的方式对表单进行校验-因此不需要写java代码"><span class="nav-number">2.62.</span> <span class="nav-text">truts-Validate框架,一个struts插件,使用声明式的方式对表单进行校验,因此不需要写java代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用方法"><span class="nav-number">2.63.</span> <span class="nav-text">使用方法:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#struts中的权限管理"><span class="nav-number">2.64.</span> <span class="nav-text">struts中的权限管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#log4j的使用"><span class="nav-number">2.65.</span> <span class="nav-text">log4j的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#struts数据库管理模块"><span class="nav-number">2.66.</span> <span class="nav-text">struts数据库管理模块</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ninghuang</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
